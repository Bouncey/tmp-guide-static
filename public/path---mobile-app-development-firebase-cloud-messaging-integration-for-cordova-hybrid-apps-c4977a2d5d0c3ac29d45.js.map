{"version":3,"sources":["webpack:///path---mobile-app-development-firebase-cloud-messaging-integration-for-cordova-hybrid-apps-c4977a2d5d0c3ac29d45.js","webpack:///./.cache/json/mobile-app-development-firebase-cloud-messaging-integration-for-cordova-hybrid-apps.json"],"names":["webpackJsonp","./node_modules/json-loader/index.js!./.cache/json/mobile-app-development-firebase-cloud-messaging-integration-for-cordova-hybrid-apps.json","module","exports","data","markdownRemark","html","fields","slug","frontmatter","title","pathContext"],"mappings":"AAAAA,cAAc,qBAERC,6IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,gBAAkBC,KAAA,oo6BAA2k5BC,QAAwiDC,KAAA,yFAA+FC,aAAgBC,MAAA,kEAAyEC,aAAgBH,KAAA","file":"path---mobile-app-development-firebase-cloud-messaging-integration-for-cordova-hybrid-apps-c4977a2d5d0c3ac29d45.js","sourcesContent":["webpackJsonp([8789952022766864000],{\n\n/***/ \"./node_modules/json-loader/index.js!./.cache/json/mobile-app-development-firebase-cloud-messaging-integration-for-cordova-hybrid-apps.json\":\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<h2>Firebase Cloud Messaging Integration for Cordova Hybrid Apps</h2>\\n<p>This is a basic straight forward walk through regarding how to implement push notification in Android as well as iOS using the <a href='https://github.com/fechanique/cordova-plugin-fcm' target='_blank' rel='nofollow'> cordova plugin for fcm </a> and Google Firebase FCM from scratch.\\nI will be using Ubuntu 16.04 LTS for this, but OS used for development should not matter much.</p>\\n<h2>FCM Integration for Cordova Hybrid Apps</h2>\\n<h3>Android Implementation</h3>\\n<p>Create an empty folder pushSample</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>cd '/opt/lampp/htdocs'\\nmkdir pushSample\\ncd pushSample\\ncordova create pushSample\\ncd pushSample\\ncordova platform add android\\ncordova plugin add cordova-plugin-FCM</code></pre>\\n      </div>\\n<p>While adding the cordova FCM plugin will show an error :</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>Error: cordova-plugin-fcm: You have installed platform android but file 'google-services.json' was not found in your Cordova project root folder.</code></pre>\\n      </div>\\n<p>Note : This is because we have not added the google-services.json file which has to be created in the next following steps.</p>\\n<p>Next open the <a href='https://console.firebase.google.com/' target='_blank' rel='nofollow'> google firebase console </a> and Add Project ( basically means create a new project )</p>\\n<p>Once the project is created click on Notifications section in left side panel.</p>\\n<p>Now click on the Android icon to add <strong>Android</strong> platform support to our project.</p>\\n<p>In the next popup form fill the details as follows :\\n<strong>Android package name :</strong> Package name or ID is the unique identifier for an app in the play store.\\nNote that it is a very important value which cannot be changed for an app once it is uploaded to the play store.\\nIt will be in reverse domain name syntax : eg hello.pushSample.com will have app id : com.pushSample.hello.\\nAlso in the <strong>config.xml</strong> file in your cordova project set the same app id.\\nFor our sample project it will be in :\\npushSample/pushSample/config.xml\\neg for me the contents of this file are :</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-xml\\\"><code><span class=\\\"token prolog\\\">&lt;?xml version='1.0' encoding='utf-8'?></span>\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>widget</span> <span class=\\\"token attr-name\\\">id</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>io.cordova.hellocordova<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">version</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>1.0.0<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">xmlns</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>http://www.w3.org/ns/widgets<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\"><span class=\\\"token namespace\\\">xmlns:</span>cdv</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>http://cordova.apache.org/ns/1.0<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>name</span><span class=\\\"token punctuation\\\">></span></span>HelloCordova<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>name</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>description</span><span class=\\\"token punctuation\\\">></span></span>\\n        A sample Apache Cordova application that responds to the deviceready event.\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>description</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>author</span> <span class=\\\"token attr-name\\\">email</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>dev@cordova.apache.org<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>http://cordova.io<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n        Apache Cordova Team\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>author</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>content</span> <span class=\\\"token attr-name\\\">src</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>index.html<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>plugin</span> <span class=\\\"token attr-name\\\">name</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>cordova-plugin-whitelist<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">spec</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>1<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>access</span> <span class=\\\"token attr-name\\\">origin</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>allow-intent</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>http://*/*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>allow-intent</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>https://*/*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>allow-intent</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>tel:*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>allow-intent</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>sms:*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>allow-intent</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>mailto:*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>allow-intent</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>geo:*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>platform</span> <span class=\\\"token attr-name\\\">name</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>android<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>allow-intent</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>market:*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>platform</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>platform</span> <span class=\\\"token attr-name\\\">name</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>ios<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>allow-intent</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>itms:*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>allow-intent</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>itms-apps:*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>platform</span><span class=\\\"token punctuation\\\">></span></span>\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>widget</span><span class=\\\"token punctuation\\\">></span></span>\\n</code></pre>\\n      </div>\\n<p>Note the tag</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-xml\\\"><code><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>widget</span> <span class=\\\"token attr-name\\\">id</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>io.cordova.hellocordova<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">version</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>1.0.0<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">xmlns</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>http://www.w3.org/ns/widgets<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\"><span class=\\\"token namespace\\\">xmlns:</span>cdv</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>http://cordova.apache.org/ns/1.0<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n</code></pre>\\n      </div>\\n<p>Here the attribute id is the package <strong>id</strong> which will by default be <strong>io.cordova.hellocordova</strong> change it to the app id you have specified in the firebase console. I will be using com.pushSample.hello</p>\\n<p>Next field to be filled in the firebase console popup is :</p>\\n<p><strong>App nickname (optional) :</strong> This can be the same app name which is displayed in the menu for the app, this can also be changed in the config.xml, by default it will be HelloCordova, i will update it to <strong>PushSample</strong></p>\\n<p><strong>Debug signing certificate SHA-1 (optional) :</strong> This is optional please leave it blank.</p>\\n<p>Next click on <strong>Register App</strong></p>\\n<p>Next step is to download the <strong>google services json</strong> file.</p>\\n<img src=\\\"https://preview.ibb.co/nEjbwv/1_Wje_TClf8o9z_Dxw3_W_wkpw.png\\\" alt=\\\"download google services json\\\" border=\\\"0\\\">\\n<p>Click on the <strong>Download google-services.json</strong> button, which should download the file to your PC.</p>\\n<p>Once you get the file paste it in the root folder of your cordova project, in my case :</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>/opt/lampp/htdocs/pushSample/pushSample</code></pre>\\n      </div>\\n<p>Next build the project</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>cordova build android</code></pre>\\n      </div>\\n<p>After adding the google-services.json file it should build successfully.</p>\\n<p>Next we have to write the client side code for handling push notifications :</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code>FCMPlugin<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getToken</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>token<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//this is the FCM token which can be used</span>\\n    <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//to send notification to specific device </span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>token<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//FCMPlugin.onNotification( onNotificationCallback(data), successCallback(msg), errorCallback(err) )</span>\\n    <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//Here you define your application behaviour based on the notification data.</span>\\n    FCMPlugin<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">onNotification</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>data<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>data<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//data.wasTapped == true means in Background :  Notification was received on device tray and tapped by the user.</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//data.wasTapped == false means in foreground :  Notification was received in foreground. Maybe the user needs to be notified.</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// if (data.wasTapped) {</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//     //Notification was received on device tray and tapped by the user.</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//     alert(JSON.stringify(data));</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// } else {</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//     //Notification was received in foreground. Maybe the user needs to be notified.</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//     alert(JSON.stringify(data));</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// }</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre>\\n      </div>\\n<p>The code basically first calls the <strong>getToken</strong> function to get an FCM token from firebase, then in the callback registers another callback <strong>onNotification</strong> to handle what happens when a push notification is received.</p>\\n<p>the <strong>onNotification</strong> function has a data value which contains the notification data. data.wasTapped indicates whether the notification is sent when the app is in foreground or background, so that we can define separate logic for each case.\\nNow to trigger a sample push notification click on the Notification section in the left side panel, this should now show you the firebase notification composer, showing the list of past notifications sent.</p>\\n<p>In case you have not sent any push notifications yet. You should see a <strong>send your first notification</strong> button.</p>\\n<p><strong>Note:</strong> The Notification Composer will look like this :</p>\\n<img src=\\\"https://preview.ibb.co/b4qc3a/1_s_W2_Ad_QJz_JEFjto6rz1_8r_A.png\\\" alt=\\\"send your first notification\\\" border=\\\"0\\\">\\n<p>Note While sending push notification using firebase console you need to select app name <strong>com.pushSample.hello</strong> in my case.</p>\\n<p>To send the custom application specific data select advance options -> Key value pairs.</p>\\n<img src=\\\"https://preview.ibb.co/ensbUF/1_qp9_Mz_XBZvn_PYawyo0_TQBRA.png\\\" alt=\\\"advanced options\\\" border=\\\"0\\\">\\n<p>The data object in the onNotification callback will look as follows</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code><span class=\\\"token punctuation\\\">{</span>myKey2<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"valuefor2\\\"</span><span class=\\\"token punctuation\\\">,</span> myKey<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"valuefor1\\\"</span><span class=\\\"token punctuation\\\">,</span> wasTapped<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span><span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p>Also note while sending push notifications using REST APIs from your app server instead of the firebase notification composer, you have to use the following syntax :</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code><span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//POST: https://fcm.googleapis.com/fcm/send</span>\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//HEADER: Content-Type: application/json</span>\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//HEADER: Authorization: key=AIzaSy*******************</span>\\n<span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token string\\\">\\\"notification\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token string\\\">\\\"title\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"Notification title\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"body\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"Notification body\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"sound\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"default\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"click_action\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"FCM_PLUGIN_ACTIVITY\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"icon\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"fcm_push_icon\\\"</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token string\\\">\\\"data\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token string\\\">\\\"param1\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"value1\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"param2\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"value2\\\"</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"to\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"/topics/topicExample\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"priority\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"high\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"restricted_package_name\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"\\\"</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//sound: optional field if you want sound with the notification</span>\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//click_action: must be present with the specified value for Android</span>\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//icon: white icon resource name for Android >5.0</span>\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//data: put any \\\"param\\\":\\\"value\\\" and retreive them in the JavaScript notification callback</span>\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//to: device token or /topic/topicExample</span>\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//priority: must be set to \\\"high\\\" for delivering notifications on closed iOS apps</span>\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//restricted_package_name: optional field if you want to send only to a restricted app package (i.e: com.myapp.test)</span>\\n</code></pre>\\n      </div>\\n<p><strong>Note : “click<em>action”:”FCM</em>PLUGIN_ACTIVITY”</strong> field is very important as not mentioning it will not execute the onNotification callback in foreground mode.</p>\\n<img src=\\\"https://image.ibb.co/gRS1UF/0_QIzc_JZH9_Nqzpjygg.jpg\\\" alt=\\\"done with android implementation\\\" border=\\\"0\\\">\\n<h3>iOS Implementation</h3>\\n<p>For the iOS implementation we will require the following things to be generated in the <a href='https://developer.apple.com/' target='_blank' rel='nofollow'> apple developer page.</a>\\nI am using XCODE 8.3</p>\\n<p>App ID : com.example.app\\nApple Push Notification Authentication Key ( APNs Auth Key )\\nDevelopment Provisioning Profile with Push Notifications Enabled.\\nAPNs Certificates</p>\\n<p>Also <a href='https://firebase.google.com/docs/cloud-messaging/ios/client' target='_blank' rel='nofollow'> Firebase docs for push notifications </a> is an excellent in depth starting point.</p>\\n<p>Note: You cannot run push notifications in the simulator, you will need an actual device.</p>\\n<p>Lets begin.</p>\\n<p>Firstly login to firebase developer’s console, and select an existing project or create a new project, we will be using the same pushSample project.\\nIn the project overview add another app with iOS as platform.\\nIn the popup that comes up, enter the following details :</p>\\n<ul>\\n<li>Step 1\\n<strong>Bundle id :</strong> this is the unique identifier which is used to identify an app in the apple appstore, this should be same as the bundle id you will specify in the config.xml file of the cordova project or the Bundle Id section in xCode.\\nwe will use <strong>com.pushSample.hello</strong>\\n<strong>App Name</strong> : This is the option identifier nick name, we will be using the same name which will display in the iOS app menu which is PushSample.\\n<strong>App Store Id</strong> : Leave this blank.</li>\\n</ul>\\n<p>Once you click on register app the iOS app step 2 appears.</p>\\n<ul>\\n<li>Step 2\\nHere click on the download <strong>Googleservice-info.plist</strong> button to download the file which we will use in the later steps.</li>\\n</ul>\\n<p><strong>Step3 and Step 4</strong> we can skip as these will be handled internally by the cordova FCM plugin.</p>\\n<p>Once the iOS app is added to your project Click on the gear icon besides the overview label in the left side panel and select project settings. ( Refer below image. ) . This should by default open the General Tab of your project settings.</p>\\n<img src=\\\"https://preview.ibb.co/ddcwwv/1_c_Pee_Xdmf76l_W0_YRr_I83_Log.png\\\" alt=\\\"Project Settings\\\" border=\\\"0\\\">\\n<p>Next click on your iOS app in Your Apps -> iOS Apps.\\nIn the iOS app details update the <strong>App ID Prefix</strong>, the value for which you will get in the Apple Member Center under the membership tab.</p>\\n<p>Now switch to the <strong>Cloud Messaging</strong> tab -> iOS app configuration section.</p>\\n<img src=\\\"https://preview.ibb.co/m2Ktbv/1_0p_Vvf_JGYb_TEUIhwr_DIek_Q.png\\\" alt=\\\"cloud messaging\\\" border=\\\"0\\\">\\n<p>Here as discussed earlier upload the APNs Auth Key you generated in the Apple member center.\\nNext we do the client side app setup.\\nCreate a new folder sampleApp in your development folder, for me it is</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>/Volumes/Development/</code></pre>\\n      </div>\\n<p>so the new folder will be</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>/Volumes/Development/pushSample\\ncd /Volumes/Development/pushSample</code></pre>\\n      </div>\\n<p>Create a new cordova project, <strong>Note : Use sudo if required</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>cordova create pushSample\\ncd pushSample</code></pre>\\n      </div>\\n<p>Now add the latest iOS platform</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>sudo cordova platform add ios</code></pre>\\n      </div>\\n<p>Now paste the <strong>Googleservice-info.plist</strong> file we downloaded earlier in the cordova project root folder, for me it is</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>/Volumes/Development/pushSample/pushSample</code></pre>\\n      </div>\\n<p>add the cordova fcm plugin.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>cordova plugin add cordova-plugin-fcm</code></pre>\\n      </div>\\n<p>Update the default app id and app name with the bundle id we decided earlier while configuring firebase console and the app name.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-xml\\\"><code><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>widget</span> <span class=\\\"token attr-name\\\">id</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>com.pushSample.hello<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">version</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>1.0.0<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">xmlns</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>http://www.w3.org/ns/widgets<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\"><span class=\\\"token namespace\\\">xmlns:</span>cdv</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>http://cordova.apache.org/ns/1.0<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>name</span><span class=\\\"token punctuation\\\">></span></span>PushSample<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>name</span><span class=\\\"token punctuation\\\">></span></span>\\n</code></pre>\\n      </div>\\n<p>At this point the sample code will have an app.js file, which you can modify and add the getToken and onNotification functions same as android. The javascript code is same for both platforms.</p>\\n<p>Next run cordova build command</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>sudo cordova build ios</code></pre>\\n      </div>\\n<p>Once the cordova build command is successful, open the app in xcode. To do this open the xcode.proj file, which will be located in</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>your_cordova_project/platforms/ios/app_name.xcodeproj</code></pre>\\n      </div>\\n<p>for me it is</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>/Volumes/Development/pushSample/pushSample/platforms/ios/PushSample.xcodeproj</code></pre>\\n      </div>\\n<img src=\\\"https://preview.ibb.co/hePLOa/1_Xe_Kh4_VXU_o_BQ05_UGRa_B6_A.png\\\" alt=\\\"Xcode Project\\\" border=\\\"0\\\">\\n<p>Next enable Push Notifications in the Capabilities Tab of the project.</p>\\n<p>Connect an actual device and run the app.</p>\\n<p>Now trigger the push notification from the firebase notification composer and everything should work…\\n<img src=\\\"https://image.ibb.co/jz8VOa/1vnhjv.jpg\\\" alt=\\\"happy steve\\\" border=\\\"0\\\"></p>\\n<p><a href='https://medium.com/@t1tan1um/fcm-integration-for-cordova-hybrid-apps-c679f5fc1988' target='_blank' rel='nofollow'>The original post on Medium</a>.</p>\",\"fields\":{\"slug\":\"/mobile-app-development/firebase-cloud-messaging-integration-for-cordova-hybrid-apps/\"},\"frontmatter\":{\"title\":\"Firebase Cloud Messaging Integration for Cordova Hybrid Apps\"}}},\"pathContext\":{\"slug\":\"/mobile-app-development/firebase-cloud-messaging-integration-for-cordova-hybrid-apps/\"}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---mobile-app-development-firebase-cloud-messaging-integration-for-cordova-hybrid-apps-c4977a2d5d0c3ac29d45.js","module.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<h2>Firebase Cloud Messaging Integration for Cordova Hybrid Apps</h2>\\n<p>This is a basic straight forward walk through regarding how to implement push notification in Android as well as iOS using the <a href='https://github.com/fechanique/cordova-plugin-fcm' target='_blank' rel='nofollow'> cordova plugin for fcm </a> and Google Firebase FCM from scratch.\\nI will be using Ubuntu 16.04 LTS for this, but OS used for development should not matter much.</p>\\n<h2>FCM Integration for Cordova Hybrid Apps</h2>\\n<h3>Android Implementation</h3>\\n<p>Create an empty folder pushSample</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>cd '/opt/lampp/htdocs'\\nmkdir pushSample\\ncd pushSample\\ncordova create pushSample\\ncd pushSample\\ncordova platform add android\\ncordova plugin add cordova-plugin-FCM</code></pre>\\n      </div>\\n<p>While adding the cordova FCM plugin will show an error :</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>Error: cordova-plugin-fcm: You have installed platform android but file 'google-services.json' was not found in your Cordova project root folder.</code></pre>\\n      </div>\\n<p>Note : This is because we have not added the google-services.json file which has to be created in the next following steps.</p>\\n<p>Next open the <a href='https://console.firebase.google.com/' target='_blank' rel='nofollow'> google firebase console </a> and Add Project ( basically means create a new project )</p>\\n<p>Once the project is created click on Notifications section in left side panel.</p>\\n<p>Now click on the Android icon to add <strong>Android</strong> platform support to our project.</p>\\n<p>In the next popup form fill the details as follows :\\n<strong>Android package name :</strong> Package name or ID is the unique identifier for an app in the play store.\\nNote that it is a very important value which cannot be changed for an app once it is uploaded to the play store.\\nIt will be in reverse domain name syntax : eg hello.pushSample.com will have app id : com.pushSample.hello.\\nAlso in the <strong>config.xml</strong> file in your cordova project set the same app id.\\nFor our sample project it will be in :\\npushSample/pushSample/config.xml\\neg for me the contents of this file are :</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-xml\\\"><code><span class=\\\"token prolog\\\">&lt;?xml version='1.0' encoding='utf-8'?></span>\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>widget</span> <span class=\\\"token attr-name\\\">id</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>io.cordova.hellocordova<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">version</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>1.0.0<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">xmlns</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>http://www.w3.org/ns/widgets<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\"><span class=\\\"token namespace\\\">xmlns:</span>cdv</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>http://cordova.apache.org/ns/1.0<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>name</span><span class=\\\"token punctuation\\\">></span></span>HelloCordova<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>name</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>description</span><span class=\\\"token punctuation\\\">></span></span>\\n        A sample Apache Cordova application that responds to the deviceready event.\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>description</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>author</span> <span class=\\\"token attr-name\\\">email</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>dev@cordova.apache.org<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>http://cordova.io<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n        Apache Cordova Team\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>author</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>content</span> <span class=\\\"token attr-name\\\">src</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>index.html<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>plugin</span> <span class=\\\"token attr-name\\\">name</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>cordova-plugin-whitelist<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">spec</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>1<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>access</span> <span class=\\\"token attr-name\\\">origin</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>allow-intent</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>http://*/*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>allow-intent</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>https://*/*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>allow-intent</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>tel:*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>allow-intent</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>sms:*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>allow-intent</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>mailto:*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>allow-intent</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>geo:*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>platform</span> <span class=\\\"token attr-name\\\">name</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>android<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>allow-intent</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>market:*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>platform</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>platform</span> <span class=\\\"token attr-name\\\">name</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>ios<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>allow-intent</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>itms:*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>allow-intent</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>itms-apps:*<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>platform</span><span class=\\\"token punctuation\\\">></span></span>\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>widget</span><span class=\\\"token punctuation\\\">></span></span>\\n</code></pre>\\n      </div>\\n<p>Note the tag</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-xml\\\"><code><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>widget</span> <span class=\\\"token attr-name\\\">id</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>io.cordova.hellocordova<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">version</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>1.0.0<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">xmlns</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>http://www.w3.org/ns/widgets<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\"><span class=\\\"token namespace\\\">xmlns:</span>cdv</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>http://cordova.apache.org/ns/1.0<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n</code></pre>\\n      </div>\\n<p>Here the attribute id is the package <strong>id</strong> which will by default be <strong>io.cordova.hellocordova</strong> change it to the app id you have specified in the firebase console. I will be using com.pushSample.hello</p>\\n<p>Next field to be filled in the firebase console popup is :</p>\\n<p><strong>App nickname (optional) :</strong> This can be the same app name which is displayed in the menu for the app, this can also be changed in the config.xml, by default it will be HelloCordova, i will update it to <strong>PushSample</strong></p>\\n<p><strong>Debug signing certificate SHA-1 (optional) :</strong> This is optional please leave it blank.</p>\\n<p>Next click on <strong>Register App</strong></p>\\n<p>Next step is to download the <strong>google services json</strong> file.</p>\\n<img src=\\\"https://preview.ibb.co/nEjbwv/1_Wje_TClf8o9z_Dxw3_W_wkpw.png\\\" alt=\\\"download google services json\\\" border=\\\"0\\\">\\n<p>Click on the <strong>Download google-services.json</strong> button, which should download the file to your PC.</p>\\n<p>Once you get the file paste it in the root folder of your cordova project, in my case :</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>/opt/lampp/htdocs/pushSample/pushSample</code></pre>\\n      </div>\\n<p>Next build the project</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>cordova build android</code></pre>\\n      </div>\\n<p>After adding the google-services.json file it should build successfully.</p>\\n<p>Next we have to write the client side code for handling push notifications :</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code>FCMPlugin<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getToken</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>token<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//this is the FCM token which can be used</span>\\n    <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//to send notification to specific device </span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>token<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//FCMPlugin.onNotification( onNotificationCallback(data), successCallback(msg), errorCallback(err) )</span>\\n    <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//Here you define your application behaviour based on the notification data.</span>\\n    FCMPlugin<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">onNotification</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>data<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>data<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//data.wasTapped == true means in Background :  Notification was received on device tray and tapped by the user.</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//data.wasTapped == false means in foreground :  Notification was received in foreground. Maybe the user needs to be notified.</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// if (data.wasTapped) {</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//     //Notification was received on device tray and tapped by the user.</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//     alert(JSON.stringify(data));</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// } else {</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//     //Notification was received in foreground. Maybe the user needs to be notified.</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//     alert(JSON.stringify(data));</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// }</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre>\\n      </div>\\n<p>The code basically first calls the <strong>getToken</strong> function to get an FCM token from firebase, then in the callback registers another callback <strong>onNotification</strong> to handle what happens when a push notification is received.</p>\\n<p>the <strong>onNotification</strong> function has a data value which contains the notification data. data.wasTapped indicates whether the notification is sent when the app is in foreground or background, so that we can define separate logic for each case.\\nNow to trigger a sample push notification click on the Notification section in the left side panel, this should now show you the firebase notification composer, showing the list of past notifications sent.</p>\\n<p>In case you have not sent any push notifications yet. You should see a <strong>send your first notification</strong> button.</p>\\n<p><strong>Note:</strong> The Notification Composer will look like this :</p>\\n<img src=\\\"https://preview.ibb.co/b4qc3a/1_s_W2_Ad_QJz_JEFjto6rz1_8r_A.png\\\" alt=\\\"send your first notification\\\" border=\\\"0\\\">\\n<p>Note While sending push notification using firebase console you need to select app name <strong>com.pushSample.hello</strong> in my case.</p>\\n<p>To send the custom application specific data select advance options -> Key value pairs.</p>\\n<img src=\\\"https://preview.ibb.co/ensbUF/1_qp9_Mz_XBZvn_PYawyo0_TQBRA.png\\\" alt=\\\"advanced options\\\" border=\\\"0\\\">\\n<p>The data object in the onNotification callback will look as follows</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code><span class=\\\"token punctuation\\\">{</span>myKey2<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"valuefor2\\\"</span><span class=\\\"token punctuation\\\">,</span> myKey<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"valuefor1\\\"</span><span class=\\\"token punctuation\\\">,</span> wasTapped<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span><span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p>Also note while sending push notifications using REST APIs from your app server instead of the firebase notification composer, you have to use the following syntax :</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code><span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//POST: https://fcm.googleapis.com/fcm/send</span>\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//HEADER: Content-Type: application/json</span>\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//HEADER: Authorization: key=AIzaSy*******************</span>\\n<span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token string\\\">\\\"notification\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token string\\\">\\\"title\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"Notification title\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"body\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"Notification body\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"sound\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"default\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"click_action\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"FCM_PLUGIN_ACTIVITY\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"icon\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"fcm_push_icon\\\"</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token string\\\">\\\"data\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token string\\\">\\\"param1\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"value1\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"param2\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"value2\\\"</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"to\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"/topics/topicExample\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"priority\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"high\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"restricted_package_name\\\"</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">\\\"\\\"</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//sound: optional field if you want sound with the notification</span>\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//click_action: must be present with the specified value for Android</span>\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//icon: white icon resource name for Android >5.0</span>\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//data: put any \\\"param\\\":\\\"value\\\" and retreive them in the JavaScript notification callback</span>\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//to: device token or /topic/topicExample</span>\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//priority: must be set to \\\"high\\\" for delivering notifications on closed iOS apps</span>\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//restricted_package_name: optional field if you want to send only to a restricted app package (i.e: com.myapp.test)</span>\\n</code></pre>\\n      </div>\\n<p><strong>Note : “click<em>action”:”FCM</em>PLUGIN_ACTIVITY”</strong> field is very important as not mentioning it will not execute the onNotification callback in foreground mode.</p>\\n<img src=\\\"https://image.ibb.co/gRS1UF/0_QIzc_JZH9_Nqzpjygg.jpg\\\" alt=\\\"done with android implementation\\\" border=\\\"0\\\">\\n<h3>iOS Implementation</h3>\\n<p>For the iOS implementation we will require the following things to be generated in the <a href='https://developer.apple.com/' target='_blank' rel='nofollow'> apple developer page.</a>\\nI am using XCODE 8.3</p>\\n<p>App ID : com.example.app\\nApple Push Notification Authentication Key ( APNs Auth Key )\\nDevelopment Provisioning Profile with Push Notifications Enabled.\\nAPNs Certificates</p>\\n<p>Also <a href='https://firebase.google.com/docs/cloud-messaging/ios/client' target='_blank' rel='nofollow'> Firebase docs for push notifications </a> is an excellent in depth starting point.</p>\\n<p>Note: You cannot run push notifications in the simulator, you will need an actual device.</p>\\n<p>Lets begin.</p>\\n<p>Firstly login to firebase developer’s console, and select an existing project or create a new project, we will be using the same pushSample project.\\nIn the project overview add another app with iOS as platform.\\nIn the popup that comes up, enter the following details :</p>\\n<ul>\\n<li>Step 1\\n<strong>Bundle id :</strong> this is the unique identifier which is used to identify an app in the apple appstore, this should be same as the bundle id you will specify in the config.xml file of the cordova project or the Bundle Id section in xCode.\\nwe will use <strong>com.pushSample.hello</strong>\\n<strong>App Name</strong> : This is the option identifier nick name, we will be using the same name which will display in the iOS app menu which is PushSample.\\n<strong>App Store Id</strong> : Leave this blank.</li>\\n</ul>\\n<p>Once you click on register app the iOS app step 2 appears.</p>\\n<ul>\\n<li>Step 2\\nHere click on the download <strong>Googleservice-info.plist</strong> button to download the file which we will use in the later steps.</li>\\n</ul>\\n<p><strong>Step3 and Step 4</strong> we can skip as these will be handled internally by the cordova FCM plugin.</p>\\n<p>Once the iOS app is added to your project Click on the gear icon besides the overview label in the left side panel and select project settings. ( Refer below image. ) . This should by default open the General Tab of your project settings.</p>\\n<img src=\\\"https://preview.ibb.co/ddcwwv/1_c_Pee_Xdmf76l_W0_YRr_I83_Log.png\\\" alt=\\\"Project Settings\\\" border=\\\"0\\\">\\n<p>Next click on your iOS app in Your Apps -> iOS Apps.\\nIn the iOS app details update the <strong>App ID Prefix</strong>, the value for which you will get in the Apple Member Center under the membership tab.</p>\\n<p>Now switch to the <strong>Cloud Messaging</strong> tab -> iOS app configuration section.</p>\\n<img src=\\\"https://preview.ibb.co/m2Ktbv/1_0p_Vvf_JGYb_TEUIhwr_DIek_Q.png\\\" alt=\\\"cloud messaging\\\" border=\\\"0\\\">\\n<p>Here as discussed earlier upload the APNs Auth Key you generated in the Apple member center.\\nNext we do the client side app setup.\\nCreate a new folder sampleApp in your development folder, for me it is</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>/Volumes/Development/</code></pre>\\n      </div>\\n<p>so the new folder will be</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>/Volumes/Development/pushSample\\ncd /Volumes/Development/pushSample</code></pre>\\n      </div>\\n<p>Create a new cordova project, <strong>Note : Use sudo if required</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>cordova create pushSample\\ncd pushSample</code></pre>\\n      </div>\\n<p>Now add the latest iOS platform</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>sudo cordova platform add ios</code></pre>\\n      </div>\\n<p>Now paste the <strong>Googleservice-info.plist</strong> file we downloaded earlier in the cordova project root folder, for me it is</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>/Volumes/Development/pushSample/pushSample</code></pre>\\n      </div>\\n<p>add the cordova fcm plugin.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>cordova plugin add cordova-plugin-fcm</code></pre>\\n      </div>\\n<p>Update the default app id and app name with the bundle id we decided earlier while configuring firebase console and the app name.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-xml\\\"><code><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>widget</span> <span class=\\\"token attr-name\\\">id</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>com.pushSample.hello<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">version</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>1.0.0<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">xmlns</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>http://www.w3.org/ns/widgets<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\"><span class=\\\"token namespace\\\">xmlns:</span>cdv</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>http://cordova.apache.org/ns/1.0<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>name</span><span class=\\\"token punctuation\\\">></span></span>PushSample<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>name</span><span class=\\\"token punctuation\\\">></span></span>\\n</code></pre>\\n      </div>\\n<p>At this point the sample code will have an app.js file, which you can modify and add the getToken and onNotification functions same as android. The javascript code is same for both platforms.</p>\\n<p>Next run cordova build command</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>sudo cordova build ios</code></pre>\\n      </div>\\n<p>Once the cordova build command is successful, open the app in xcode. To do this open the xcode.proj file, which will be located in</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>your_cordova_project/platforms/ios/app_name.xcodeproj</code></pre>\\n      </div>\\n<p>for me it is</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>/Volumes/Development/pushSample/pushSample/platforms/ios/PushSample.xcodeproj</code></pre>\\n      </div>\\n<img src=\\\"https://preview.ibb.co/hePLOa/1_Xe_Kh4_VXU_o_BQ05_UGRa_B6_A.png\\\" alt=\\\"Xcode Project\\\" border=\\\"0\\\">\\n<p>Next enable Push Notifications in the Capabilities Tab of the project.</p>\\n<p>Connect an actual device and run the app.</p>\\n<p>Now trigger the push notification from the firebase notification composer and everything should work…\\n<img src=\\\"https://image.ibb.co/jz8VOa/1vnhjv.jpg\\\" alt=\\\"happy steve\\\" border=\\\"0\\\"></p>\\n<p><a href='https://medium.com/@t1tan1um/fcm-integration-for-cordova-hybrid-apps-c679f5fc1988' target='_blank' rel='nofollow'>The original post on Medium</a>.</p>\",\"fields\":{\"slug\":\"/mobile-app-development/firebase-cloud-messaging-integration-for-cordova-hybrid-apps/\"},\"frontmatter\":{\"title\":\"Firebase Cloud Messaging Integration for Cordova Hybrid Apps\"}}},\"pathContext\":{\"slug\":\"/mobile-app-development/firebase-cloud-messaging-integration-for-cordova-hybrid-apps/\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/mobile-app-development-firebase-cloud-messaging-integration-for-cordova-hybrid-apps.json\n// module id = ./node_modules/json-loader/index.js!./.cache/json/mobile-app-development-firebase-cloud-messaging-integration-for-cordova-hybrid-apps.json\n// module chunks = 8789952022766864000"],"sourceRoot":""}