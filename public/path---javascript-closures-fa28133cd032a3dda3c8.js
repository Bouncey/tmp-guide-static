webpackJsonp([0x7044a2c6c7651800],{"./node_modules/json-loader/index.js!./.cache/json/javascript-closures.json":function(n,s){n.exports={data:{markdownRemark:{html:'<h1>Closures</h1>\n<p>A closure is the combination of a function and the lexical environment (scope) within which that function was declared. Closures are a fundamental and powerful property of Javascript. This article discusses the ‘how’ and ‘why’ about Closures:</p>\n<h3>Example</h3>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token comment" spellcheck="true">//we have an outer function named walk and an inner function named fly</span>\n\n<span class="token keyword">function</span> walk <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n  \n  <span class="token keyword">var</span> dist <span class="token operator">=</span> <span class="token string">\'1780 feet\'</span><span class="token punctuation">;</span>\n  \n  <span class="token keyword">function</span> <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'At \'</span><span class="token operator">+</span>dist<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  \n  <span class="token keyword">return</span> fly<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">var</span> flyFunc <span class="token operator">=</span> <span class="token function">walk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//calling walk returns the fly function which is being assigned to flyFunc</span>\n<span class="token comment" spellcheck="true">//you would expect that once the walk function above is run</span>\n<span class="token comment" spellcheck="true">//you would think that JavaScript has gotten rid of the \'dist\' var</span>\n\n<span class="token function">flyFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//Logs out \'At 1780 feet\'</span>\n<span class="token comment" spellcheck="true">//but you still can use the function as above </span>\n<span class="token comment" spellcheck="true">//this is the power of closures</span>\n</code></pre>\n      </div>\n<h3>Another Example</h3>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">by</span><span class="token punctuation">(</span>propName<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> a<span class="token punctuation">[</span>propName<span class="token punctuation">]</span> <span class="token operator">-</span> b<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> person1 <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">\'joe\'</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">72</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> person2 <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">\'rob\'</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">70</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> person3 <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">\'nicholas\'</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">66</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> arr_ <span class="token operator">=</span> <span class="token punctuation">[</span>person1<span class="token punctuation">,</span> person2<span class="token punctuation">,</span> person3<span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> arr_sorted <span class="token operator">=</span> arr_<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token function">by</span><span class="token punctuation">(</span><span class="token string">\'height\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// [ { name: \'nicholas\', height: 66 }, { name: \'rob\', height: 70 },{ name: \'joe\', height: 72 } ]</span>\n</code></pre>\n      </div>\n<p>The closure ‘remembers’ the environment in which it was created. This environment consists of any local variables that were in-scope at the time the closure was created.</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">outside</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">var</span> rememberedVar <span class="token operator">=</span> num<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// In this example, rememberedVar is the lexical environment that the closure \'remembers\'</span>\n  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">inside</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// This is the function which the closure \'remembers\'</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rememberedVar<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">var</span> remember1 <span class="token operator">=</span> <span class="token function">outside</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// remember1 is now a closure which contains rememberedVar = 7 in its lexical environment, and //the function \'inside\'</span>\n<span class="token keyword">var</span> remember2 <span class="token operator">=</span> <span class="token function">outside</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// remember2 is now a closure which contains rememberedVar = 9 in its lexical environment, and //the function \'inside\'</span>\n\n<span class="token function">remember1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// This now executes the function \'inside\' which console.logs(rememberedVar) => 7</span>\n<span class="token function">remember2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// This now executes the function \'inside\' which console.logs(rememberedVar) => 9 </span>\n</code></pre>\n      </div>\n<p>Closures are useful because they let you ‘remember’ data and then let you operate on that data through returned functions. This allows javascript to emulate private methods that are found in other programming languages. Private methods are useful for restricting access to code as well as managing your global namespace.</p>\n<h3>Private variables and methods</h3>\n<p>Closures can also be used to encapsulate private data/methods. Take a look at this example:</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">const</span> bankAccount <span class="token operator">=</span> <span class="token punctuation">(</span>initialBalance<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> balance <span class="token operator">=</span> initialBalance<span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    getBalance<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span> balance<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    deposit<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      balance <span class="token operator">+=</span> amount<span class="token punctuation">;</span>\n      <span class="token keyword">return</span> balance<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> account <span class="token operator">=</span> <span class="token function">bankAccount</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\naccount<span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 100</span>\naccount<span class="token punctuation">.</span><span class="token function">deposit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 110</span>\n</code></pre>\n      </div>\n<p>In this example, we won’t be able to access <code>balance</code> from anywhere outside of the <code>bankAccount</code> function, which means we’ve just created a private variable. Where’s the closure? Well, think about what <code>bankAccount()</code> is returning. It actually returns an Object with  a bunch of functions inside it, and yet when we call <code>account.getBalance()</code>, the function is able to “remember” its initial reference to <code>balance</code>. That is the power of the closure, where a function “remembers” its lexical scope (compile time scope), even when the function is executed outside that lexical scope.</p>\n<p><b>Emulating block-scoped variables.</b></p>\n<p>Javascript did not have a concept of block-scoped variables. Meaning that when defining a variable inside a forloop for example, this variable is visible from outside the forloop as well. So how can closures help us solve this problem ? Let’s take a look.</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code>    <span class="token keyword">var</span> funcs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    \n    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        funcs<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'My value is \'</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//creating three different functions with different param values.</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    \n    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        funcs<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment" spellcheck="true">// My value is 3</span>\n                                <span class="token comment" spellcheck="true">// My value is 3</span>\n                                <span class="token comment" spellcheck="true">// My value is 3</span>\n    <span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>Since the variable i does not have block-scope, it’s value within all three functions was updated with the loop counter and created malicious values. Closure can help us solve this issue by creating a snapshot of the environment the function was in when it was created, preserving its state.</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code>    <span class="token keyword">var</span> funcs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    \n    <span class="token keyword">var</span> createFunction <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span>\n\t    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"My value: "</span> <span class="token operator">+</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        funcs<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">createFunction</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        funcs<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment" spellcheck="true">// My value is 0</span>\n                                    <span class="token comment" spellcheck="true">// My value is 1</span>\n                                    <span class="token comment" spellcheck="true">// My value is 2</span>\n    <span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>The late versions of javascript es6+ have a new keyword called let which can be used to give the variable a blockscope.\nThere are also many functions (forEach) and entire libraries (lodash.js) that are dedicated to solve such problems as the ones explained above. They can certainly boost your productivity, however it remains extremely important to have knowledge of all these issues when attempting to create something big.</p>\n<p>Closures have many special applications that are useful when creating large javascript programs.</p>\n<ol>\n<li>Emulating private variables or encapsulation</li>\n<li>Making Assynchronous server side calls</li>\n<li>Creating a block-scoped variable.</li>\n</ol>\n<p><b>Emulating private variables.</b></p>\n<p>Unlike many other languages, Javascript does not have a mechanism which allows you to create encapsulated instance variables within an object. Having public instance variables can cause alot of problems when biulding medium to large programs. However with closures, this problem can be mitigated.</p>\n<p>Much like in the previous example, you can build functions which return object literals with methods that have access to the object’s local variables without exposing them. Thus, making them effectively private.</p>\n<p>Closures can also help you manage your global namespace to avoid collisions with globally shared data. Usually all global variables are shared between all scripts in your project, which will definitely give you alot of trouble when building medium to large programs. That is why library and module authors use closures to hide an entire module’s methods and data. This is called the module pattern, it uses an immediately invoked function expression which exports only certain functionality to the outside world, significantly reducing the amount of global references.</p>\n<p>Here’s a short sample of a module skeleton.</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">var</span> myModule <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> privateVariable <span class="token operator">=</span> <span class="token string">\'I am a private variable\'</span><span class="token punctuation">;</span>\n    \n    <span class="token keyword">let</span> method1 <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'I am method 1\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> method2 <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'I am method 2, \'</span><span class="token punctuation">,</span> privateVariable<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    \n    <span class="token keyword">return</span> <span class="token punctuation">{</span>\n        method1<span class="token punctuation">:</span> method1<span class="token punctuation">,</span>\n        method2<span class="token punctuation">:</span> method2\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmyModule<span class="token punctuation">.</span><span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// I am method 1</span>\nmyModule<span class="token punctuation">.</span><span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// I am method 2, I am a private variable</span>\n</code></pre>\n      </div>\n<p>Closures are useful for capturing new instances of private variables contained in the ‘remembered’ environment, and those variables can only be accessed through the returned function or methods.</p>\n<h3>More Information:</h3>\n<p><a href=\'https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures\' target=\'_blank\' rel=\'nofollow\'>MDN</a>\n<br />\n<a href=\'https://medium.freecodecamp.org/lets-learn-javascript-closures-66feb44f6a44\' target=\'_blank\' rel=\'nofollow\'>Javascript Closures</a></p>',fields:{slug:"/javascript/closures/"},frontmatter:{title:"Closures"}}},pathContext:{slug:"/javascript/closures/"}}}});
//# sourceMappingURL=path---javascript-closures-fa28133cd032a3dda3c8.js.map